{% load widget_tweaks %}
{% with WIDGET_ERROR_CLASS='is-invalid' %}

  <form hx-post="{{ request.path }}" hx-headers='{"X-CSRFToken":"{{ csrf_token }}"}' class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Gestion des élèves</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          
          <div class="row">
            <div class="col">
                <label for="{{ form.prenoms.id_for_label }}" class="form-label">Prénoms</label>
                {% render_field form.prenoms class="form-control" %}
                <div class="invalid-feedback">{{ form.prenoms.errors|first }}</div>
            </div>
            <div class="col">
                <label for="{{ form.nom.id_for_label }}" class="form-label">Nom</label>
                {% render_field form.nom class="form-control" %}
                <div class="invalid-feedback">{{ form.nom.errors|first }}</div>
            </div>
          </div>

          <div class="row">
            <div class="col">
                <label for="{{ form.dateNaissance.id_for_label }}" class="form-label">Date de naissance</label>
                {% render_field form.dateNaissance class="form-control" %}
                <div class="invalid-feedback">{{ form.dateNaissance.errors|first }}</div>
            </div>
            <div class="col">
                <label for="{{ form.lieuNaissance.id_for_label }}" class="form-label">Lieu de naissance</label>
                {% render_field form.lieuNaissance class="form-control" %}
                <div class="invalid-feedback">{{ form.lieuNaissance.errors|first }}</div>
            </div>
          </div>

          <div class="row">
            <div class="col">
                <label for="{{ form.sexe.id_for_label }}" class="form-label">Sexe</label>
                {% render_field form.sexe class="form-select" %}
                <div class="invalid-feedback">{{ form.sexe.errors|first }}</div>
            </div>
            <div class="col">
                <label for="{{ form.matricule.id_for_label }}" class="form-label">Matricule</label>
                {% render_field form.matricule class="form-control" %}
                <div class="invalid-feedback">{{ form.matricule.errors|first }}</div>
            </div>
          </div>

          <div class="row">
            <div class="col">
                <label for="{{ form.pere.id_for_label }}" class="form-label">Prénoms du père</label>
                {% render_field form.pere class="form-control" %}
                <div class="invalid-feedback">{{ form.pere.errors|first }}</div>
            </div>
            <div class="col">
                <label for="{{ form.mere.id_for_label }}" class="form-label">Nom complet de la mère</label>
                {% render_field form.mere class="form-control" %}
                <div class="invalid-feedback">{{ form.mere.errors|first }}</div>
            </div>
          </div>

          <div class="row">
            <div class="col">
                <label for="{{ form.tuteur.id_for_label }}" class="form-label">Tuteur</label>
                {% render_field form.tuteur class="form-control" %}
                <div class="invalid-feedback">{{ form.tuteur.errors|first }}</div>
            </div>
            <div class="col">
                <label for="{{ form.provenance.id_for_label }}" class="form-label">Provenance</label>
                {% render_field form.provenance class="form-control" %}
                <div class="invalid-feedback">{{ form.provenance.errors|first }}</div>
            </div>
          </div>

          <div class="row">
            <div class="col">
                <label for="{{ form.contact.id_for_label }}" class="form-label">Contact des parents</label>
                {% render_field form.contact class="form-control" %}
                <div class="invalid-feedback">{{ form.contact.errors|first }}</div>
            </div>
            <div class="col">
                <label for="{{ form.adresse.id_for_label }}" class="form-label">Adresse</label>
                {% render_field form.adresse class="form-control" %}
                <div class="invalid-feedback">{{ form.adresse.errors|first }}</div>
            </div>
          </div>

          <div class="row">
            <div class="col">
                <label for="{{ form.classe.id_for_label }}" class="form-label">Classe</label>
                {% render_field form.classe class="form-select" %}
                <div class="invalid-feedback">{{ form.classe.errors|first }}</div>
            </div>
            <div class="col">
                <label for="{{ form.affectations.id_for_label }}" class="form-label">Affectations</label>
                {% render_field form.affectations class="form-select-multiple" %}
                <div class="invalid-feedback">{{ form.affectations.errors|first }}</div>
            </div>
          </div>
          
      </div>
      <div class="modal-footer">
          {% if student %}
          <button type="button" class="btn btn-danger" hx-post="{% url 'remove_student' pk=student.pk %}">Remove</button>
          <span class="flex-grow-1"></span>
          {% endif %}
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            Cancel
          </button>
          <button type="submit" class="btn btn-primary">Save</button>
      </div>
  </form>
  
{% endwith %}
